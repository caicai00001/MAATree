# 新手上路

- [新手上路](#新手上路)
  - [前置准备](#前置准备)
    - [1. 确认版本系统](#1-确认版本系统)
    - [2. 安装运行环境](#2-安装运行环境)
      - [1. VCRedist x64](#1-vcredist-x64)
      - [2. .NET 8](#2-net-8)
    - [3. 下载正确的版本](#3-下载正确的版本)
    - [4. 确认模拟器和设备支持](#4-确认模拟器和设备支持)
    - [5 正确设置模拟器分辨率](#5-正确设置模拟器分辨率)
    - [6. 开始使用](#6-开始使用)
      - [Windows](#windows)
      - [macOS](#macos)
      - [Linux](#linux)
    - [7. 配置 MAATree](#7-配置-m9a)
      - [首次启动](#首次启动)
      - [MAATree 设置界面](#MAATree-设置界面)
      - [MAATree 主界面](#MAATree-主界面)
      - [pip 设置](#pip-设置)
  - [相关文档](#相关文档)

## 前置准备

### 1. 确认版本系统

<div align="center">

| | Windows | macOS | Linux | Android |
| :---: | :---: | :---: | :---: | :---: |
| 系统要求 | Windows 10 及以上、x86_64 架构 | 自行尝试 | 自行尝试 | 不推荐 |
| 需要配置环境 | 是 | 是 | 是 | 是 |
| 需要模拟器 | 是 | 是 | 模拟器或容器化安卓 | 否 |
| 使用方式 | 图形界面或命令行 | 图形界面或命令行 | 图形界面或命令行 | 命令行 |

| | 备注                                                                                                                                                                                                                                                                |
| --- |-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Mac 用户 | MAATree 同时支持搭载 Apple Silicon 和 Intel 芯片的 Mac 电脑<br>但更推荐搭载 Intel 芯片的 Mac 电脑使用 Mac 自带的多系统安装 Windows<br>并使用 Windows 版 MAATree 和模拟器                                                                                                                                       |
| Android 用户 | MAATree 已不再提供 Android 版本发行包<br>如您非常了解手机操作并希望使用 Android 实体设备，请前往 [开发文档](../develop/开发前须知.md) 自行安装<br>可参考 [使用方法](https://github.com/MaaXYZ/MaaFramework/issues/475) ，以及 [MAA文档](https://maa.plus/docs/zh-cn/manual/device/android.html) <br>此方法较为复杂且具有一定风险，不推荐入门玩家使用此方法 |

</div>

***

### 2. 安装运行环境

<div align="center">

<table>
    <thead>
        <tr>
            <th rowspan="2"><div align="center">启动方式</div></th>
            <th colspan="2"><div align="center">Windows</div></th>
            <th colspan="2"><div align="center">macOS</div></th>
            <th colspan="2"><div align="center">Linux</div></th>
        </tr>
        <tr>
            <th><div align="center">命令行（MaaPiCli）</div></th>
            <th><div align="center">图形界面（MFAAvalonia）</div></th>
            <th><div align="center">命令行</div></th>
            <th><div align="center">图形界面</div></th>
            <th><div align="center">命令行</div></th>
            <th><div align="center">图形界面</div></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><div align="center">需安装<br>VCRedist</div></td>
            <td colspan="2"><div align="center">点击 <a href="https://aka.ms/vs/17/release/vc_redist.x64.exe" target="_blank">vc_redist.x64</a> 下载或通过 winget 安装（详见下方）</div></td>
            <td colspan="4"><div align="center">否</div></td>
        </tr>
        <tr>
            <td><div align="center">需安装<br>.NET 8</div></td>
            <td><div align="center">否</div></td>
            <td><div align="center">前往 <a href="https://dotnet.microsoft.com/zh-cn/download/dotnet/8.0" target="_blank">.NET 官方下载页面</a> 下载对应版本或<br>通过 winget 安装（详见下方）</div></td>
            <td><div align="center">否</div></td>
            <td><div align="center"> <a href="https://dotnet.microsoft.com/zh-cn/download/dotnet/8.0" target="_blank">.NET 官方下载页面</a> </div></td>
            <td><div align="center">否</div></td>
            <td><div align="center">同 Mac</div></td>
        </tr>
        <tr>
            <td><div align="center">需安装<br>Python</div></td>
            <td colspan="4"><div align="center">压缩包自带，无需其他操作</div></td>
            <td colspan="2"><div align="center">3.10≤python<3.14</div></td>
        </tr>
    </tbody>
</table>

</div>

#### 1. VCRedist x64

Windows 用户**必须安装 VCRedist x64**：这是运行 MAATree (无论是命令行版本还是图形界面版本) 的基础需求。

<details>
  <summary>详细安装方式</summary>
  <p></p>
  <blockquote>
    <ul>
      <li>
        直接下载：点击
        <a href="https://aka.ms/vs/17/release/vc_redist.x64.exe" target="_blank">vc_redist.x64</a>
        下载并安装
      </li>
      <li>
        <code>winget</code> 安装：右键 Windows 开始按钮，选择“命令提示符”或“PowerShell (管理员)”，然后在终端内粘贴以下命令并回车：
        <pre><code>winget install Microsoft.VCRedist.2017.x64</code></pre>
      </li>
    </ul>
  </blockquote>
</details>

#### 2. .NET 8

所有使用 MFAAvalonia 的用户都需要自行下载并安装适用于您系统的 .NET 8 。

<details>
  <summary>详细安装方式</summary>
  <p></p>
  <blockquote>
    <ul>
      <li>
        自行下载：点击
        <a href="https://dotnet.microsoft.com/download/dotnet/8.0" target="_blank">.NET 官方下载页面</a>
        ，选择适合您系统的版本下载并安装。
        <div align="center">
          <table>
            <thead>
              <tr>
                <th></th>
                <th>Windows</th>
                <th>macOS</th>
                <th>Linux</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>您需要下载</td>
                <td colspan="1">.NET 桌面运行时</td>
                <td colspan="2">.NET 运行时</td>         </tr>
              <tr>
                <td>安装程序</td>
                <td>x64</td>
                <td colspan="2">
                  <a href="https://builds.dotnet.microsoft.com/dotnet/scripts/v1/dotnet-install.sh" target="_blank">dotnet-install.sh</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </li>
      <li>
        （仅 Windows 用户）<code>winget</code> 安装：右键 Windows 开始按钮，选择“命令提示符”或“PowerShell (管理员)”，然后在终端内粘贴以下命令并回车：
        <pre><code>winget install Microsoft.DotNet.DesktopRuntime.8</code></pre>
      </li>
    </ul>
  </blockquote>
</details>

***

### 3. 下载正确的版本

MAATree 下载（更新）地址： [GitHub 发布页](https://github.com/caicai00001/MAATree/releases)  。点击链接后，在 `Assets` 处选择适配您系统的最新版压缩包下载。


<div align="center">

| | Windows | macOS | Linux |
| :---: | :---: | :---: | :---: |
| 您需要下载 | `MAATree-win-x86_64-vXXX.zip` | `MAATree-macos-x86_64-vXXX.tar.gz` 或 `MAATree-macos-aarch64-vXXX.tar.gz`<br>取决于您的架构 | `MAATree-linux-x86_64-vXXX.tar.gz` 或 `MAATree-linux-aarch64-vXXX.tar.gz`<br>取决于您的架构 |

</div>

<details>
  <summary>Mac用户查看处理器架构方法</summary>
  <p></p>
  <blockquote>
    <ol>
      <li>点击屏幕左上角的苹果标志。</li>
      <li>选择“关于本机”。</li>
      <li>在弹出的窗口中，你可以看到处理器的信息。</li>
    </ol>
    <ul>
      <li>若使用 Intel X86 处理器，请下载 <code>MAATree-macos-x86_64-vXXX.tar.gz</code></li>
      <li>若使用 Apple Silicon 系列如：M1、M2 等 ARM 架构处理器，请下载 <code>MAATree-macos-aarch64-vXXX.tar.gz</code></li>
    </ul>
  </blockquote>
</details>

***

### 4. 确认模拟器和设备支持

<div align="center">

| | Windows | macOS | Linux | Android |
| :---: | :---: | :---: | :---: | :---: |
| 模拟器支持 | 支持主流模拟器 | 支持主流模拟器 | 自行尝试 | / |
| 需要adb功能 | 是 | 是 | 是 | 是 |
| 备注 |  | [暂不支持 PlayCover](https://github.com/MaaXYZ/MaaFramework/issues/405) |  |  |

</div>

模拟器支持详情可参阅 MAA 文档。**仅供参考**，请以 [MaaFramework](https://github.com/MaaXYZ/MaaFramework) 实际支持情况为准。

<details>

  <summary>MAA 模拟器和设备支持文档</summary>

  <p></p>

  <blockquote>

  <div align="center">

  | | Windows | macOS | Linux | Android |
  | -------- | -------- | ------- | ------- | ------- |
  | 参考文档 | [Windows 模拟器](https://maa.plus/docs/zh-cn/manual/device/windows.html) | 如果你的设备搭载 Apple Silicon 请参阅：<br>[在 Apple Silicon 平台上运行的Mac模拟器](https://maa.plus/docs/zh-cn/manual/device/macos.html#apple-silicon-%E8%8A%AF%E7%89%87)<br>如果你的设备搭载 Intel 芯片：<br>1. 推荐使用 Mac 自带的多系统安装 Windows <br>并参考 Windows 部分文档<br>2. 参阅[在 Intel 平台上运行的 Mac 模拟器](https://maa.plus/docs/zh-cn/manual/device/macos.html#intel-%E8%8A%AF%E7%89%87) | [Linux 模拟器与容器](https://maa.plus/docs/zh-cn/manual/device/linux.html) | [Android 实体设备](<https://maa.plus/docs/zh-cn/manual/device/android.html>) |

  </div>

  </blockquote>

 </details>

***

### 5 正确设置模拟器分辨率

MAATree 支持主流模拟器，但您需要设置模拟器分辨率以达到运行要求。  
模拟器分辨率应为`横屏` `16:9` 比例，推荐（以及最低）分辨率为 `1280x720`，不符合要求造成的运行报错将不会被解决。

>[!WARNING]
>
> 注意修改分辨率后模拟器主页应该是横屏（平板版），不要选成竖屏（手机版）了！

***

### 6. 开始使用

MAATree 支持通过命令行（MaaPiCli）和图形化界面（MFAAvalonia），但在使用前，需正确解压压缩包。

> [!IMPORTANT]
> 不要在压缩软件直接打开程序！

对于一般用户，推荐通过 **MFAAvalonia** 使用 MAATree 。

#### Windows

确认解压完整，并确保将 MAATree 解压到一个独立的文件夹中。推荐解压路径如：`D:\MAATree`。除关闭内建管理员批准的Administrator账号外，请勿将 MAA 解压到如 `C:\`、`C:\Program Files\` 等需要 UAC 权限的路径。

- 解压后运行 `MaaPiCli.exe` 或 `MFAAvalonia.exe` 即可

#### macOS

<details>
  <summary>详情</summary>
  <p></p>
  <blockquote>

1. 打开终端，解压分发的压缩包：

    **选项1：解压到系统目录（需要管理员权限）**

    ```shell
    sudo mkdir -p /usr/local/bin/MAATree
    sudo tar -xzf <下载的MAATree压缩包路径> -C /usr/local/bin/MAATree
    ```

    **选项2：解压到用户目录（推荐，无需sudo）**

    ```shell
    mkdir -p ~/MAATree
    tar -xzf <下载的MAATree压缩包路径> -C ~/MAATree
    ```

2. 进入解压目录并运行程序：

    ```shell
    cd /usr/local/bin/MAATree
    ./MaaPiCli
    ```

若想使用**图形操作页面**请按第二步操作，由执行 `MaaPiCli` 改为执行 `MFAAvalonia` 程序。

⚠️Gatekeeper 安全提示处理：

在 macOS 10.15 (Catalina) 及更高版本中，Gatekeeper 可能会阻止运行未签名的应用程序。  
如果遇到"无法打开，因为无法验证开发者"等错误，请选择以下任一方案:

```shell
# 方案1：以 MaaPiCli 为例，移除隔离属性（推荐，以实际路径为准）
sudo xattr -rd com.apple.quarantine /usr/local/bin/MAATree/MaaPiCli
# 或用户目录版本：xattr -rd com.apple.quarantine ~/MAATree/MaaPiCli

# 方案2：添加到 Gatekeeper 白名单
sudo spctl --add /usr/local/bin/MAATree/MaaPiCli
# 或用户目录版本：spctl --add ~/MAATree/MaaPiCli

# 方案3：一次性处理整个目录
sudo xattr -rd com.apple.quarantine /usr/local/bin/MAATree/*
# 或用户目录版本：xattr -rd com.apple.quarantine ~/MAATree/*
```

  </blockquote>
</details>

#### Linux

同macOS，下载对应版本的压缩包，解压后运行 `MaaPiCli` 或 `MFAAvalonia` 即可。

***

### 7. 配置 MAATree

您可以根据自己的需求配置 MAATree 以得到更好的使用体验。

部分配置项在配置错误或未配置时可能会导致 MAATree **运行异常**，因此推荐您在开始使用前阅读本章节。

本章将主要介绍如何通过图形界面（MFAAvalonia）配置 MAATree 。如果您正在使用命令行版本（MaaPiCli），请参考 [MaaPiCli操作说明](./MaaPiCli.md) 。

下列演示仅供参考，请以软件实际情况为准。

#### 首次启动

<details open>
  <summary>MFA主页面展示</summary>
  <p></p>
  <blockquote>
    <img src="/img/MAATreeHOME.png" alt="主界面">
  </blockquote>
</details>

在主界面中，可看到 **`资源类型`** **`任务列表`** **`任务设置`** **`任务说明`** **`连接`** **`日志`** 六大板块。

> [!CAUTION]
> 首次启动 MFA 时， MAATree 将进行初始化。在 `日志` 板块显示 “**AgentServer 启动**”后，直到看见 “**任务已全部完成**” 前，请不要点击 `停止任务` 。

MAATree 运行任务时，无法修改主界面的部分设置，如 `连接` 板块。此时，可先进入全局设置界面配置。

***

#### MAATree 设置界面

点击主界面左下角的齿轮按钮进入 MAATree 设置界面。

使用 MFA 更新相关功能的用户应配置 `更新设置` 。有多开和自启需求的用户应配置 `启动设置` 。


***

**`启动设置`**

- `软件路径` 用于指定模拟器的可执行文件路径。配置错误时 MAATree 将无法正确启动模拟器。
- `附加命令` 用于指定模拟器启动时的参数。一般而言， `附加命令` 仅用于配置模拟器多开号。

<details open>
  <summary>详情</summary>
  <p></p>
  <blockquote>
    <ul>
      <details>
        <summary>软件路径</summary>
        <ul>
          <li>MuMu 12 模拟器参考</li>
            <table>
              <thead>
                <tr>
                  <th></th>
                  <th>路径格式</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>MuMu 12 模拟器<br>5.0 以下</td>
                  <td><code>{安装目录}\shell\MuMuPlayer.exe</code></td>
                </tr>
                <tr>
                  <td>MuMu 12 模拟器<br>5.0 及以上</td>
                  <td><code>{安装目录}\nx_device\12.0\shell\MuMuNxDevice.exe</code></td>
                </tr>
              </tbody>
            </table>
        </ul>
      </details>
      <details>
        <summary>附加命令</summary>
          <ul>
            <li>X 为多开号</li>
            <table>
              <thead>
                <tr>
                <th></th>
                <th>参数格式</th>
                <th>示例</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                <td>MuMu 模拟器</td>
                <td><code>-v X</code></td>
                <td><code>-v 0</code></td>
                </tr>
                <tr>
                <td>雷电模拟器</td>
                <td><code>index=X</code></td>
                <td><code>index=0</code></td>
                </tr>
              </tbody>
            </table>
          </ul>
      </details>
    </ul>
  </blockquote>
</details>

***

#### MAATree 主界面

至少配置 **`资源类型`** 和 **`连接`** 。配置错误时将无法正常使用 MAATree 。

**`资源类型`**

  <details open>
      <summary>详情</summary>
      <p></p>
      <blockquote>
        <ul>
          <li>需选择模拟器中安装的 悠久之树 区服。</li>
          <li>目前支持：<b>官服</b>、<b>B服</b>。</li>
        </ul>
      </blockquote>
    </details>

***

**`连接`**

  MAATree 需正确的 ADB 连接才能在**目标**模拟器执行任务。绝大多数情况下，您只需保持有且仅有目标模拟器启动，点击“刷新”即可完成连接。如需手动配置 ADB 参数，请参考 [连接设置](./连接设置.md)。

  <details>
    <summary>示意图</summary>
    <p></p>
    <blockquote>
      <ul>
        <img src="https://github.com/user-attachments/assets/8e3f0f90-4e0d-46e2-b718-837a6e9ae152" alt="image_440">
      </ul>
    </blockquote>
  </details>

  <details open>
    <summary>详情</summary>
    <p></p>
    <blockquote>
      <ul>
        <details open>
          <summary>当前控制器</summary>
            <ul>
              <li>显示当前连接的 ADB 控制器（模拟器和 ADB 地址）。</li>
            </ul>
        </details>
        <details open>
          <summary>界面按钮说明</summary>
            <ul>
              <li>点击<b>自定义</b>：修改 ADB 参数（一般无需手动修改）。</li>
              <li>点击<b>刷新</b>：重新检测所有已启动模拟器。</li>
              <li><b>连接状态</b>：绿色为已连接。</li>
            </ul>
        </details>
      </ul>
    </blockquote>
  </details>

***

**`任务列表`**

  <details>
    <summary>示意图</summary>
    <p></p>
    <blockquote>
      <ul>
        <img src="/img/任务列表.png" alt="image_441">
      </ul>
    </blockquote>
  </details>

  <details open>
    <summary>详情</summary>
    <p></p>
    <blockquote>
      <ul>
        <li>任务名前的复选框用于启用/禁用任务</li>
        <li>右键单击复选框将单次执行该任务</li>
        <li>点击右上角添加任务按钮可添加当前列表不可见任务或重复添加已有任务</li>
        <li>点击任务右侧按钮查看 <b>任务设置</b> 与 <b>任务说明</b></li>
        <li>拖动任务名可调整任务顺序</li>
      </ul>
    </blockquote>
  </details>

>[!IMPORTANT]
>
> 大部分任务需在使用前正确配置，少部分任务还需根据任务说明在特定场景执行。启用任务前，请确保您已阅读并理解了该任务的**任务说明**，并结合实际情况对**任务设置**进行配置。更多关于任务的说明请参阅 [功能介绍](./功能介绍.md) 。

***

## 相关文档

- [连接设置](./连接设置.md#连接设置)——介绍了adb连接以及模拟器设置
- [MaaPiCli操作说明](./MaaPiCli.md)——介绍了 MaaPiCli 使用方法~~翻译文档~~
- [功能介绍](./功能介绍.md)——介绍了部分功能的注意事项
- [常见问题](./常见问题.md)——介绍了常见问题及解决策略
